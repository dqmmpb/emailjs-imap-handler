'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.verify = exports.COMMAND = exports.TAG = exports.RESP_SPECIALS = exports.QUOTED_SPECIALS = exports.LIST_WILDCARDS = exports.ATOM_SPECIALS = exports.TEXT_CHAR = exports.ASTRING_CHAR = exports.ATOM_CHAR = exports.DIGIT = exports.ALPHA = exports.DQUOTE = exports.CTL = exports.SP = exports.CHAR8 = exports.CHAR = undefined;

var _ramda = require('ramda');

// IMAP Formal Syntax
// http://tools.ietf.org/html/rfc3501#section-9

var expandRange = function expandRange(start, end) {
  return String.fromCharCode.apply(String, (0, _ramda.range)(start, end + 1));
};
var excludeChars = function excludeChars(source, exclude) {
  return (0, _ramda.without)(exclude.split(''), source.split('')).join('');
};

var CHAR = exports.CHAR = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return expandRange(0x01, 0x7F);
});
var CHAR8 = exports.CHAR8 = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return expandRange(0x01, 0xFF);
});
var SP = exports.SP = function SP() {
  return ' ';
};
var CTL = exports.CTL = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return expandRange(0x00, 0x1F) + '\x7F';
});
var DQUOTE = exports.DQUOTE = function DQUOTE() {
  return '"';
};
var ALPHA = exports.ALPHA = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return expandRange(0x41, 0x5A) + expandRange(0x61, 0x7A);
});
var DIGIT = exports.DIGIT = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return expandRange(0x30, 0x39) + expandRange(0x61, 0x7A);
});
var ATOM_CHAR = exports.ATOM_CHAR = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return excludeChars(CHAR(), ATOM_SPECIALS());
});
var ASTRING_CHAR = exports.ASTRING_CHAR = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return ATOM_CHAR() + RESP_SPECIALS();
});
var TEXT_CHAR = exports.TEXT_CHAR = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return excludeChars(CHAR(), '\r\n');
});
var ATOM_SPECIALS = exports.ATOM_SPECIALS = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return '(' + ')' + '{' + SP() + CTL() + LIST_WILDCARDS() + QUOTED_SPECIALS() + RESP_SPECIALS();
});
var LIST_WILDCARDS = exports.LIST_WILDCARDS = function LIST_WILDCARDS() {
  return '%' + '*';
};
var QUOTED_SPECIALS = exports.QUOTED_SPECIALS = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return DQUOTE() + '\\';
});
var RESP_SPECIALS = exports.RESP_SPECIALS = function RESP_SPECIALS() {
  return ']';
};
var TAG = exports.TAG = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return excludeChars(ASTRING_CHAR(), '+');
});
var COMMAND = exports.COMMAND = (0, _ramda.memoizeWith)(_ramda.identity, function () {
  return ALPHA() + DIGIT();
});
var verify = exports.verify = function verify(str, allowedChars) {
  for (var i = 0, len = str.length; i < len; i++) {
    if (allowedChars.indexOf(str.charAt(i)) < 0) {
      return i;
    }
  }
  return -1;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9mb3JtYWwtc3ludGF4LmpzIl0sIm5hbWVzIjpbImV4cGFuZFJhbmdlIiwic3RhcnQiLCJlbmQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhcHBseSIsImV4Y2x1ZGVDaGFycyIsInNvdXJjZSIsImV4Y2x1ZGUiLCJzcGxpdCIsImpvaW4iLCJDSEFSIiwiaWRlbnRpdHkiLCJDSEFSOCIsIlNQIiwiQ1RMIiwiRFFVT1RFIiwiQUxQSEEiLCJESUdJVCIsIkFUT01fQ0hBUiIsIkFUT01fU1BFQ0lBTFMiLCJBU1RSSU5HX0NIQVIiLCJSRVNQX1NQRUNJQUxTIiwiVEVYVF9DSEFSIiwiTElTVF9XSUxEQ0FSRFMiLCJRVU9URURfU1BFQ0lBTFMiLCJUQUciLCJDT01NQU5EIiwidmVyaWZ5Iiwic3RyIiwiYWxsb3dlZENoYXJzIiwiaSIsImxlbiIsImxlbmd0aCIsImluZGV4T2YiLCJjaGFyQXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBOztBQUVBLElBQU1BLGNBQWMsU0FBZEEsV0FBYyxDQUFDQyxLQUFELEVBQVFDLEdBQVI7QUFBQSxTQUFnQkMsT0FBT0MsWUFBUCxDQUFvQkMsS0FBcEIsQ0FBMEJGLE1BQTFCLEVBQWtDLGtCQUFNRixLQUFOLEVBQWFDLE1BQU0sQ0FBbkIsQ0FBbEMsQ0FBaEI7QUFBQSxDQUFwQjtBQUNBLElBQU1JLGVBQWUsU0FBZkEsWUFBZSxDQUFDQyxNQUFELEVBQVNDLE9BQVQ7QUFBQSxTQUFxQixvQkFBUUEsUUFBUUMsS0FBUixDQUFjLEVBQWQsQ0FBUixFQUEyQkYsT0FBT0UsS0FBUCxDQUFhLEVBQWIsQ0FBM0IsRUFBNkNDLElBQTdDLENBQWtELEVBQWxELENBQXJCO0FBQUEsQ0FBckI7O0FBRU8sSUFBTUMsc0JBQU8sd0JBQVlDLGVBQVosRUFBc0I7QUFBQSxTQUFNWixZQUFZLElBQVosRUFBa0IsSUFBbEIsQ0FBTjtBQUFBLENBQXRCLENBQWI7QUFDQSxJQUFNYSx3QkFBUSx3QkFBWUQsZUFBWixFQUFzQjtBQUFBLFNBQU1aLFlBQVksSUFBWixFQUFrQixJQUFsQixDQUFOO0FBQUEsQ0FBdEIsQ0FBZDtBQUNBLElBQU1jLGtCQUFLLFNBQUxBLEVBQUs7QUFBQSxTQUFNLEdBQU47QUFBQSxDQUFYO0FBQ0EsSUFBTUMsb0JBQU0sd0JBQVlILGVBQVosRUFBc0I7QUFBQSxTQUFNWixZQUFZLElBQVosRUFBa0IsSUFBbEIsSUFBMEIsTUFBaEM7QUFBQSxDQUF0QixDQUFaO0FBQ0EsSUFBTWdCLDBCQUFTLFNBQVRBLE1BQVM7QUFBQSxTQUFNLEdBQU47QUFBQSxDQUFmO0FBQ0EsSUFBTUMsd0JBQVEsd0JBQVlMLGVBQVosRUFBc0I7QUFBQSxTQUFNWixZQUFZLElBQVosRUFBa0IsSUFBbEIsSUFBMEJBLFlBQVksSUFBWixFQUFrQixJQUFsQixDQUFoQztBQUFBLENBQXRCLENBQWQ7QUFDQSxJQUFNa0Isd0JBQVEsd0JBQVlOLGVBQVosRUFBc0I7QUFBQSxTQUFNWixZQUFZLElBQVosRUFBa0IsSUFBbEIsSUFBMEJBLFlBQVksSUFBWixFQUFrQixJQUFsQixDQUFoQztBQUFBLENBQXRCLENBQWQ7QUFDQSxJQUFNbUIsZ0NBQVksd0JBQVlQLGVBQVosRUFBc0I7QUFBQSxTQUFNTixhQUFhSyxNQUFiLEVBQXFCUyxlQUFyQixDQUFOO0FBQUEsQ0FBdEIsQ0FBbEI7QUFDQSxJQUFNQyxzQ0FBZSx3QkFBWVQsZUFBWixFQUFzQjtBQUFBLFNBQU1PLGNBQWNHLGVBQXBCO0FBQUEsQ0FBdEIsQ0FBckI7QUFDQSxJQUFNQyxnQ0FBWSx3QkFBWVgsZUFBWixFQUFzQjtBQUFBLFNBQU1OLGFBQWFLLE1BQWIsRUFBcUIsTUFBckIsQ0FBTjtBQUFBLENBQXRCLENBQWxCO0FBQ0EsSUFBTVMsd0NBQWdCLHdCQUFZUixlQUFaLEVBQXNCO0FBQUEsU0FBTSxNQUFNLEdBQU4sR0FBWSxHQUFaLEdBQWtCRSxJQUFsQixHQUF5QkMsS0FBekIsR0FBaUNTLGdCQUFqQyxHQUFvREMsaUJBQXBELEdBQXdFSCxlQUE5RTtBQUFBLENBQXRCLENBQXRCO0FBQ0EsSUFBTUUsMENBQWlCLFNBQWpCQSxjQUFpQjtBQUFBLFNBQU0sTUFBTSxHQUFaO0FBQUEsQ0FBdkI7QUFDQSxJQUFNQyw0Q0FBa0Isd0JBQVliLGVBQVosRUFBc0I7QUFBQSxTQUFNSSxXQUFXLElBQWpCO0FBQUEsQ0FBdEIsQ0FBeEI7QUFDQSxJQUFNTSx3Q0FBZ0IsU0FBaEJBLGFBQWdCO0FBQUEsU0FBTSxHQUFOO0FBQUEsQ0FBdEI7QUFDQSxJQUFNSSxvQkFBTSx3QkFBWWQsZUFBWixFQUFzQjtBQUFBLFNBQU1OLGFBQWFlLGNBQWIsRUFBNkIsR0FBN0IsQ0FBTjtBQUFBLENBQXRCLENBQVo7QUFDQSxJQUFNTSw0QkFBVSx3QkFBWWYsZUFBWixFQUFzQjtBQUFBLFNBQU1LLFVBQVVDLE9BQWhCO0FBQUEsQ0FBdEIsQ0FBaEI7QUFDQSxJQUFNVSwwQkFBUyxTQUFUQSxNQUFTLENBQVVDLEdBQVYsRUFBZUMsWUFBZixFQUE2QjtBQUNqRCxPQUFLLElBQUlDLElBQUksQ0FBUixFQUFXQyxNQUFNSCxJQUFJSSxNQUExQixFQUFrQ0YsSUFBSUMsR0FBdEMsRUFBMkNELEdBQTNDLEVBQWdEO0FBQzlDLFFBQUlELGFBQWFJLE9BQWIsQ0FBcUJMLElBQUlNLE1BQUosQ0FBV0osQ0FBWCxDQUFyQixJQUFzQyxDQUExQyxFQUE2QztBQUMzQyxhQUFPQSxDQUFQO0FBQ0Q7QUFDRjtBQUNELFNBQU8sQ0FBQyxDQUFSO0FBQ0QsQ0FQTSIsImZpbGUiOiJmb3JtYWwtc3ludGF4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVtb2l6ZVdpdGgsIGlkZW50aXR5LCB3aXRob3V0LCByYW5nZSB9IGZyb20gJ3JhbWRhJ1xuXG4vLyBJTUFQIEZvcm1hbCBTeW50YXhcbi8vIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MDEjc2VjdGlvbi05XG5cbmNvbnN0IGV4cGFuZFJhbmdlID0gKHN0YXJ0LCBlbmQpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCByYW5nZShzdGFydCwgZW5kICsgMSkpXG5jb25zdCBleGNsdWRlQ2hhcnMgPSAoc291cmNlLCBleGNsdWRlKSA9PiB3aXRob3V0KGV4Y2x1ZGUuc3BsaXQoJycpLCBzb3VyY2Uuc3BsaXQoJycpKS5qb2luKCcnKVxuXG5leHBvcnQgY29uc3QgQ0hBUiA9IG1lbW9pemVXaXRoKGlkZW50aXR5LCAoKSA9PiBleHBhbmRSYW5nZSgweDAxLCAweDdGKSlcbmV4cG9ydCBjb25zdCBDSEFSOCA9IG1lbW9pemVXaXRoKGlkZW50aXR5LCAoKSA9PiBleHBhbmRSYW5nZSgweDAxLCAweEZGKSlcbmV4cG9ydCBjb25zdCBTUCA9ICgpID0+ICcgJ1xuZXhwb3J0IGNvbnN0IENUTCA9IG1lbW9pemVXaXRoKGlkZW50aXR5LCAoKSA9PiBleHBhbmRSYW5nZSgweDAwLCAweDFGKSArICdcXHg3RicpXG5leHBvcnQgY29uc3QgRFFVT1RFID0gKCkgPT4gJ1wiJ1xuZXhwb3J0IGNvbnN0IEFMUEhBID0gbWVtb2l6ZVdpdGgoaWRlbnRpdHksICgpID0+IGV4cGFuZFJhbmdlKDB4NDEsIDB4NUEpICsgZXhwYW5kUmFuZ2UoMHg2MSwgMHg3QSkpXG5leHBvcnQgY29uc3QgRElHSVQgPSBtZW1vaXplV2l0aChpZGVudGl0eSwgKCkgPT4gZXhwYW5kUmFuZ2UoMHgzMCwgMHgzOSkgKyBleHBhbmRSYW5nZSgweDYxLCAweDdBKSlcbmV4cG9ydCBjb25zdCBBVE9NX0NIQVIgPSBtZW1vaXplV2l0aChpZGVudGl0eSwgKCkgPT4gZXhjbHVkZUNoYXJzKENIQVIoKSwgQVRPTV9TUEVDSUFMUygpKSlcbmV4cG9ydCBjb25zdCBBU1RSSU5HX0NIQVIgPSBtZW1vaXplV2l0aChpZGVudGl0eSwgKCkgPT4gQVRPTV9DSEFSKCkgKyBSRVNQX1NQRUNJQUxTKCkpXG5leHBvcnQgY29uc3QgVEVYVF9DSEFSID0gbWVtb2l6ZVdpdGgoaWRlbnRpdHksICgpID0+IGV4Y2x1ZGVDaGFycyhDSEFSKCksICdcXHJcXG4nKSlcbmV4cG9ydCBjb25zdCBBVE9NX1NQRUNJQUxTID0gbWVtb2l6ZVdpdGgoaWRlbnRpdHksICgpID0+ICcoJyArICcpJyArICd7JyArIFNQKCkgKyBDVEwoKSArIExJU1RfV0lMRENBUkRTKCkgKyBRVU9URURfU1BFQ0lBTFMoKSArIFJFU1BfU1BFQ0lBTFMoKSlcbmV4cG9ydCBjb25zdCBMSVNUX1dJTERDQVJEUyA9ICgpID0+ICclJyArICcqJ1xuZXhwb3J0IGNvbnN0IFFVT1RFRF9TUEVDSUFMUyA9IG1lbW9pemVXaXRoKGlkZW50aXR5LCAoKSA9PiBEUVVPVEUoKSArICdcXFxcJylcbmV4cG9ydCBjb25zdCBSRVNQX1NQRUNJQUxTID0gKCkgPT4gJ10nXG5leHBvcnQgY29uc3QgVEFHID0gbWVtb2l6ZVdpdGgoaWRlbnRpdHksICgpID0+IGV4Y2x1ZGVDaGFycyhBU1RSSU5HX0NIQVIoKSwgJysnKSlcbmV4cG9ydCBjb25zdCBDT01NQU5EID0gbWVtb2l6ZVdpdGgoaWRlbnRpdHksICgpID0+IEFMUEhBKCkgKyBESUdJVCgpKVxuZXhwb3J0IGNvbnN0IHZlcmlmeSA9IGZ1bmN0aW9uIChzdHIsIGFsbG93ZWRDaGFycykge1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gc3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGFsbG93ZWRDaGFycy5pbmRleE9mKHN0ci5jaGFyQXQoaSkpIDwgMCkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xXG59XG4iXX0=